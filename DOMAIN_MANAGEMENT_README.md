# 域名管理功能说明

## 概述

本项目新增了Pages项目的自定义域名管理功能，允许用户为Cloudflare Pages项目添加、查看和删除自定义域名。

## 功能特性

### 1. 查看当前域名
- 显示项目当前绑定的所有自定义域名
- 显示每个域名的状态（已激活、验证中、验证失败）
- 显示域名的创建时间和证书颁发机构信息
- 显示验证错误的详细信息（如果有）

### 2. 添加新域名
- 支持添加完整的域名（如：example.com）
- 自动验证域名格式
- 实时显示添加状态和结果

### 3. 删除域名
- 支持删除已绑定的域名
- 删除前会显示确认对话框
- 删除后自动刷新域名列表

## 技术实现

### 后端API

#### 获取项目域名列表
```
GET /api/pages/:projectName/domains
```

#### 添加域名到项目
```
POST /api/pages/:projectName/domains
Content-Type: application/json

{
  "name": "example.com"
}
```

#### 从项目删除域名
```
DELETE /api/pages/:projectName/domains/:domainName
```

### 前端组件

#### DomainManagementModal.vue
- 主要的域名管理弹窗组件
- 包含域名列表显示、添加和删除功能
- 支持响应式设计和错误处理

#### PageItem.vue
- 在页面列表项中添加了"配置域名"按钮
- 点击按钮打开域名管理弹窗
- 支持域名配置的实时更新

## 使用方法

### 1. 打开域名管理
1. 在页面列表中找到要配置域名的项目
2. 点击项目右侧的"配置域名"按钮
3. 域名管理弹窗将打开

### 2. 添加新域名
1. 在弹窗底部的"添加新域名"部分
2. 输入完整的域名（如：example.com）
3. 点击"添加域名"按钮
4. 等待添加完成

### 3. 删除域名
1. 在域名列表中找到要删除的域名
2. 点击域名右侧的"删除"按钮
3. 在确认对话框中点击"删除"

## 注意事项

### 域名格式要求
- 域名必须包含完整的顶级域名（如：.com, .org, .net等）
- 不支持IP地址或端口号
- 域名长度和格式需符合DNS标准

### 验证过程
- 添加域名后，Cloudflare会自动开始验证过程
- 验证可能需要几分钟到几小时不等
- 验证失败时会显示具体的错误信息

### DNS配置
- 添加域名后，您需要将域名的DNS记录指向Cloudflare的服务器
- 具体的DNS配置请参考Cloudflare官方文档
- 验证成功前，域名无法正常访问

## 错误处理

### 常见错误
1. **域名已存在**：尝试添加已绑定的域名时会显示错误
2. **域名格式无效**：输入不符合DNS标准的域名时会显示错误
3. **验证失败**：域名验证失败时会显示具体的错误信息

### 错误恢复
- 大部分错误可以通过重新输入或稍后重试解决
- 验证失败时，请检查DNS配置是否正确
- 如遇持续问题，请检查Cloudflare账户权限和配置

## 开发说明

### 依赖关系
- 后端：依赖Cloudflare API的域名管理接口
- 前端：依赖Vue 3和Tailwind CSS
- 状态管理：使用Vue 3的Composition API

### 扩展性
- 域名管理弹窗组件可以独立使用
- API接口支持批量操作（可扩展）
- 支持多种域名状态和验证方式

### 测试建议
- 测试域名添加、删除和列表刷新功能
- 测试各种错误情况的处理
- 测试不同域名格式的验证
- 测试网络异常时的错误处理

## 更新日志

### v1.0.0 (当前版本)
- ✅ 基础域名管理功能
- ✅ 域名添加和删除
- ✅ 域名状态显示
- ✅ 错误处理和用户提示
- ✅ 响应式UI设计

### 计划功能
- 🔄 批量域名操作
- 🔄 域名导入/导出
- 🔄 高级DNS配置
- 🔄 域名监控和告警
